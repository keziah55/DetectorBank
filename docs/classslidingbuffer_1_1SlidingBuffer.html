<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>A Hopf, Skip and a Jump: slidingbuffer::SlidingBuffer&lt; T, S, P &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">A Hopf, Skip and a Jump
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>slidingbuffer</b></li><li class="navelem"><a class="el" href="classslidingbuffer_1_1SlidingBuffer.html">SlidingBuffer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classslidingbuffer_1_1SlidingBuffer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">slidingbuffer::SlidingBuffer&lt; T, S, P &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classslidingbuffer_1_1SlidingBuffer.html" title="SlidingBuffer is class template which can be used when reading a data stream to provide access to the...">SlidingBuffer</a> is class template which can be used when reading a data stream to provide access to the stream's immediate history.  
 <a href="classslidingbuffer_1_1SlidingBuffer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="slidingbuffer_8h_source.html">slidingbuffer.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0c79437f82aa9cbf040f98b0e0aa5050"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslidingbuffer_1_1SlidingBuffer.html#a0c79437f82aa9cbf040f98b0e0aa5050">SlidingBuffer</a> (P &amp;<a class="el" href="classslidingbuffer_1_1SlidingBuffer.html#a4a2b6ba5ac5bfc9a4e9844d68691bc8f">sp</a>, const std::size_t <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html#a80b704adf72a8abda4719d8f32090566">max_segs</a>, const std::size_t <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html#ad2477363a4ae27a9d7555f61d5136274">seg_size</a>)</td></tr>
<tr class="memdesc:a0c79437f82aa9cbf040f98b0e0aa5050"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html" title="SlidingBuffer is class template which can be used when reading a data stream to provide access to the...">SlidingBuffer</a>.  <a href="#a0c79437f82aa9cbf040f98b0e0aa5050">More...</a><br /></td></tr>
<tr class="separator:a0c79437f82aa9cbf040f98b0e0aa5050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad34bad5bf4e225f6b579e600b03f4dcf"><td class="memItemLeft" align="right" valign="top"><a id="ad34bad5bf4e225f6b579e600b03f4dcf"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslidingbuffer_1_1SlidingBuffer.html#ad34bad5bf4e225f6b579e600b03f4dcf">~SlidingBuffer</a> ()</td></tr>
<tr class="memdesc:ad34bad5bf4e225f6b579e600b03f4dcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:ad34bad5bf4e225f6b579e600b03f4dcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13267c16adc9983c978ec9ba2f7bb507"><td class="memItemLeft" align="right" valign="top">T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslidingbuffer_1_1SlidingBuffer.html#a13267c16adc9983c978ec9ba2f7bb507">operator[]</a> (long int idx)</td></tr>
<tr class="memdesc:a13267c16adc9983c978ec9ba2f7bb507"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access an element of the <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html" title="SlidingBuffer is class template which can be used when reading a data stream to provide access to the...">SlidingBuffer</a>.  <a href="#a13267c16adc9983c978ec9ba2f7bb507">More...</a><br /></td></tr>
<tr class="separator:a13267c16adc9983c978ec9ba2f7bb507"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aa21bfd34142be9e3c513683d6160a95f"><td class="memItemLeft" align="right" valign="top"><a id="aa21bfd34142be9e3c513683d6160a95f"></a>
std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslidingbuffer_1_1SlidingBuffer.html#aa21bfd34142be9e3c513683d6160a95f">origin</a></td></tr>
<tr class="memdesc:aa21bfd34142be9e3c513683d6160a95f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lowest index in buffer. <br /></td></tr>
<tr class="separator:aa21bfd34142be9e3c513683d6160a95f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80b704adf72a8abda4719d8f32090566"><td class="memItemLeft" align="right" valign="top"><a id="a80b704adf72a8abda4719d8f32090566"></a>
const std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslidingbuffer_1_1SlidingBuffer.html#a80b704adf72a8abda4719d8f32090566">max_segs</a></td></tr>
<tr class="memdesc:a80b704adf72a8abda4719d8f32090566"><td class="mdescLeft">&#160;</td><td class="mdescRight">The largest number of segments in the buffer A history of at least \(seg_size\cdot(max_segs-1)\) entities will be made available subject to sufficient data having been read from the data stream. <br /></td></tr>
<tr class="separator:a80b704adf72a8abda4719d8f32090566"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2477363a4ae27a9d7555f61d5136274"><td class="memItemLeft" align="right" valign="top"><a id="ad2477363a4ae27a9d7555f61d5136274"></a>
const std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslidingbuffer_1_1SlidingBuffer.html#ad2477363a4ae27a9d7555f61d5136274">seg_size</a></td></tr>
<tr class="memdesc:ad2477363a4ae27a9d7555f61d5136274"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of entities in each segment. <br /></td></tr>
<tr class="separator:ad2477363a4ae27a9d7555f61d5136274"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5026b3c6d2f5bf80ef0be11a29a0f3e4"><td class="memItemLeft" align="right" valign="top"><a id="a5026b3c6d2f5bf80ef0be11a29a0f3e4"></a>
std::deque&lt; S *, <a class="el" href="classslidingbuffer_1_1UniqueAllocator.html">UniqueAllocator</a>&lt; S * &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslidingbuffer_1_1SlidingBuffer.html#a5026b3c6d2f5bf80ef0be11a29a0f3e4">segs</a></td></tr>
<tr class="memdesc:a5026b3c6d2f5bf80ef0be11a29a0f3e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Segments held by the buffer. <br /></td></tr>
<tr class="separator:a5026b3c6d2f5bf80ef0be11a29a0f3e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a2b6ba5ac5bfc9a4e9844d68691bc8f"><td class="memItemLeft" align="right" valign="top"><a id="a4a2b6ba5ac5bfc9a4e9844d68691bc8f"></a>
P &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslidingbuffer_1_1SlidingBuffer.html#a4a2b6ba5ac5bfc9a4e9844d68691bc8f">sp</a></td></tr>
<tr class="memdesc:a4a2b6ba5ac5bfc9a4e9844d68691bc8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The producer to call to fill a segment. <br /></td></tr>
<tr class="separator:a4a2b6ba5ac5bfc9a4e9844d68691bc8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T, typename S, typename P&gt;<br />
class slidingbuffer::SlidingBuffer&lt; T, S, P &gt;</h3>

<p><a class="el" href="classslidingbuffer_1_1SlidingBuffer.html" title="SlidingBuffer is class template which can be used when reading a data stream to provide access to the...">SlidingBuffer</a> is class template which can be used when reading a data stream to provide access to the stream's immediate history. </p>
<h1>Structure of a <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html" title="SlidingBuffer is class template which can be used when reading a data stream to provide access to the...">SlidingBuffer</a></h1>
<p>A <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html" title="SlidingBuffer is class template which can be used when reading a data stream to provide access to the...">SlidingBuffer</a> is composed of a number of <a class="el" href="classslidingbuffer_1_1Segment.html">Segments </a>. It provides a method of accessing the segments through the [] operator so that the reading and discarding of segments is automatic and transparent. This means the data stream can be accessed as if it it were a conventional array (or other container supporting the <code>operator[]</code> method), except that as the greatest index to date increases, older elements are forgotten.</p>
<p>Segments are created and filled on demand. As the number of Segments specified at instantiation is exceeded, the oldest Segments are discarded. This means that the recent history of the buffered data is always available, "recent" being defined by the size of the <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html" title="SlidingBuffer is class template which can be used when reading a data stream to provide access to the...">SlidingBuffer</a>.</p>
<p>SlidingBuffers may only slide forward, which is to say that the accessed index must never be less than the length of the buffer prior to the greatest index ever accessed. Failing to comply with this constraint causes an exception to be thrown.</p>
<p>For example, suppose that a buffer comprising four segments each of three integers is created.</p>
<p>TODO The following isn't implemented yet... <code><a class="el" href="classslidingbuffer_1_1SegmentProducer.html#ad487b587c0dec117d5eeaab400c949e1" title="Populate the array supplied by the Segment with newly constructed entities. ">SegmentProducer::generate()</a></code> is called asynchronously to fill new Segments. A separate thread is created to calculate the datasamples used to populate the segment. In the event that a <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html" title="SlidingBuffer is class template which can be used when reading a data stream to provide access to the...">SlidingBuffer</a> <a class="el" href="classslidingbuffer_1_1Segment.html" title="A Segment is an aggregation of base data with a SlidingBuffer. ">Segment</a> is accessed before the <a class="el" href="classslidingbuffer_1_1SegmentProducer.html" title="Template of a pure virtual class which populates a Segment with entities. ">SegmentProducer</a> has finished filling it, the access blocks until such time as tne data becomes available. END TODO</p>
<p>Mindful that the act of filling a <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html" title="SlidingBuffer is class template which can be used when reading a data stream to provide access to the...">SlidingBuffer</a> may be (and usually is) stateful, although the accessed index can be advanced arbitrarily towards the end of the <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html" title="SlidingBuffer is class template which can be used when reading a data stream to provide access to the...">SlidingBuffer</a>, the <a class="el" href="classslidingbuffer_1_1SegmentProducer.html" title="Template of a pure virtual class which populates a Segment with entities. ">SegmentProducer</a> will be called to generate data up until the point it is required, attempting to access data before the beginning of the <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html" title="SlidingBuffer is class template which can be used when reading a data stream to provide access to the...">SlidingBuffer</a> will cause an exception to be thrown, even though the index may be well above 0.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>The type of the primitive data held in the buffer </td></tr>
    <tr><td class="paramname">S</td><td>The types of the segments comprising the buffer </td></tr>
    <tr><td class="paramname">P</td><td>The type of the producer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="SlidingBufferExample.html">Sliding Buffer: Internal Operation</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="slidingbuffer_8h_source.html#l00245">245</a> of file <a class="el" href="slidingbuffer_8h_source.html">slidingbuffer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0c79437f82aa9cbf040f98b0e0aa5050"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c79437f82aa9cbf040f98b0e0aa5050">&#9670;&nbsp;</a></span>SlidingBuffer()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename S, typename P&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classslidingbuffer_1_1SlidingBuffer.html">slidingbuffer::SlidingBuffer</a>&lt; T, S, P &gt;::<a class="el" href="classslidingbuffer_1_1SlidingBuffer.html">SlidingBuffer</a> </td>
          <td>(</td>
          <td class="paramtype">P &amp;&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>max_segs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>seg_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html" title="SlidingBuffer is class template which can be used when reading a data stream to provide access to the...">SlidingBuffer</a>. </p>
<p>Starting at any point in the buffer, a history of at least <code>seg_size*(max_segs-1)</code> entities is available.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sp</td><td>The producer whose <code>generate()</code> method is invoked to populate a new segment </td></tr>
    <tr><td class="paramname">max_segs</td><td>The maxiumum number of segments stored in the buffer </td></tr>
    <tr><td class="paramname">seg_size</td><td>The number of entities in each segment </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="slidingbuffer_8h_source.html#l00268">268</a> of file <a class="el" href="slidingbuffer_8h_source.html">slidingbuffer.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a13267c16adc9983c978ec9ba2f7bb507"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13267c16adc9983c978ec9ba2f7bb507">&#9670;&nbsp;</a></span>operator[]()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename S, typename P&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">T&amp; <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html">slidingbuffer::SlidingBuffer</a>&lt; T, S, P &gt;::operator[] </td>
          <td>(</td>
          <td class="paramtype">long int&#160;</td>
          <td class="paramname"><em>idx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Access an element of the <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html" title="SlidingBuffer is class template which can be used when reading a data stream to provide access to the...">SlidingBuffer</a>. </p>
<p>Return a reference to the element of the <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html" title="SlidingBuffer is class template which can be used when reading a data stream to provide access to the...">SlidingBuffer</a> or throw an exception if it is not available </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">idx</td><td>Index to access. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classslidingbuffer_1_1NegativeIndexException.html" title="Exception thrown when an attempt was made to access a negative index in the SlidingBuffer. ">NegativeIndexException</a></td><td>The index is less than 0. </td></tr>
    <tr><td class="paramname"><a class="el" href="classslidingbuffer_1_1ExpiredIndexException.html" title="Exception thrown when an apparently valid index (positive, within the extent of the data read so far)...">ExpiredIndexException</a></td><td>The indexed element is no longer available. </td></tr>
    <tr><td class="paramname"><a class="el" href="classslidingbuffer_1_1IndexOutOfRangeException.html" title="Exception thown when the entity at position &#39;index&#39; is not yet available and the SegmentProducer for ...">IndexOutOfRangeException</a></td><td>The indexed element is not yet in the <a class="el" href="classslidingbuffer_1_1SlidingBuffer.html" title="SlidingBuffer is class template which can be used when reading a data stream to provide access to the...">SlidingBuffer</a> and can not be produced by the Producer. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="slidingbuffer_8h_source.html#l00295">295</a> of file <a class="el" href="slidingbuffer_8h_source.html">slidingbuffer.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/keziah/onsets/DetectorBank/src/<a class="el" href="slidingbuffer_8h_source.html">slidingbuffer.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
