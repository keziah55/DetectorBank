<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>A Hopf, Skip and a Jump: Using the DetectorBank in Python</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">A Hopf, Skip and a Jump
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Using the <a class="el" href="classDetectorBank.html" title="Use multiple detectors to find note onsets at given frequencies (with multithreading). ">DetectorBank</a> in Python </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>detectorbank is a suite of modules which can be used to analyse audio files with Python, in conjuction with common modules NumPy and SciPy.</p>
<p>The objects it provides are: <a class="el" href="classDetectorBank.html" title="Use multiple detectors to find note onsets at given frequencies (with multithreading). ">DetectorBank</a>, DetectorCache, <a class="el" href="classOnsetDetector.html" title="Onset detector. ">OnsetDetector</a> and <a class="el" href="classFrequencyShifter.html" title="Shift a signal by a given frequency. ">FrequencyShifter</a>. Example usage of each can be found <a class="el" href="PythonExamples.html">here</a>.</p>
<p>This page provides advice on using these in Python.</p>
<p>However, due to the language differences between C++ and Python with regard to nominal vs duck typing and overloaded constructors, a few features merit further explanation.</p>
<p>Everything discussed below that you need to know in order to use this software is also illustrated in the <a class="el" href="PythonExamples.html">Python examples</a>.</p>
<p>NumPy arrays should be used for all non-scalar values passed to the <a class="el" href="classDetectorBank.html" title="Use multiple detectors to find note onsets at given frequencies (with multithreading). ">DetectorBank</a>.</p>
<p><a class="el" href="classOnsetDetector.html" title="Onset detector. ">OnsetDetector</a> is given a DB</p>
<p>If an argument should be std::size_t, that's a Python int</p>
<h1><a class="anchor" id="DetectorBank"></a>
DetectorBank</h1>
<p>A <a class="el" href="classDetectorBank.html" title="Use multiple detectors to find note onsets at given frequencies (with multithreading). ">DetectorBank</a> can be constructed either from a list of parameters or from a saved profile.</p>
<p>In the latter case, a profile string and input buffer must be provided (<a class="el" href="PythonExamples.html#SaveLoadXMLExmaple">see example</a>).</p>
<p>In the former, a number of parameters must be provided. The <code>detector_characteristics</code> argument should be a NumPy array of frequency-bandwidth pairs, which can, for example, be created from two arrays <code>zip</code>ped together as in <a class="el" href="PythonExamples.html#SimpleExample">this example</a>.</p>
<p>C++ is statically typed and therefore arguments passed from Python must be of the correct type. To prevent any errors, the sample rate, frequencies, bandwidths, damping factor and gain are cast to Python's <code>float</code> - and number of threads to <code>int</code> - when the <a class="el" href="classDetectorBank.html" title="Use multiple detectors to find note onsets at given frequencies (with multithreading). ">DetectorBank</a> is constructed.</p>
<p>The <a class="el" href="classDetectorBank.html" title="Use multiple detectors to find note onsets at given frequencies (with multithreading). ">DetectorBank</a> constructor also requires a <code>Features</code> parameter, which is explained in full <a class="el" href="FeaturesExplained.html">here</a>.</p>
<p>Both constructors take an input buffer. C++ is expecting <code>float</code>s; casting the input buffer to a <code>numpy.float32</code> in Python may be required.</p>
<p>Once a <a class="el" href="classDetectorBank.html" title="Use multiple detectors to find note onsets at given frequencies (with multithreading). ">DetectorBank</a> has been constructed, you may want to use the <a class="el" href="classDetectorBank.html#a416bb9650c4fc16f7e1a451099526eaf"><code>getZ()</code></a> and <a class="el" href="classDetectorBank.html#a3a7c0cc32a2d725bf9663b3a2e6365f9"><code>absZ()</code></a> methods. Both take an empty array, which is filled in place (<code>absZ</code> also takes the <code>getZ</code> array). The array passed to <code>getZ</code> must be of type <code>numpy.complex128</code></p>
<h1><a class="anchor" id="DetectorCache"></a>
DetectorCache</h1>
<p>Rather than using the <code>getZ</code> and <code>absZ</code> methods directly, you can construct a <a class="el" href="index.html#DetectorCache">DetectorCache</a>, which will store - and discard - small buffers of <code>absZ</code> values, thus limiting the amount of memory used. To get a value from channel <code>k</code> at sample <code>n</code>, note that you must index the cache with <code>[k,n]</code>, not <code>[k][n]</code> as you may expect.</p>
<p>To create a DetectorCache, you first must make a <a class="el" href="">Producer</a>, which is initialised with a <a class="el" href="classDetectorBank.html" title="Use multiple detectors to find note onsets at given frequencies (with multithreading). ">DetectorBank</a>. The Producer provides a number of methods which return information about the given <a class="el" href="classDetectorBank.html" title="Use multiple detectors to find note onsets at given frequencies (with multithreading). ">DetectorBank</a>, for example <a class="el" href="">sample rate </a>, <a class="el" href="">a given channel's frequency </a> etc.</p>
<p>See <a class="el" href="PythonExamples.html#DetectorCacheExample">here </a> for an example illustrating the above.</p>
<h1><a class="anchor" id="FrequencyShifter"></a>
FrequencyShifter</h1>
<p>The <a class="el" href="PythonUsage.html#FrequencyShifter">FrequencyShifter</a> is used automatically by the <a class="el" href="classDetectorBank.html" title="Use multiple detectors to find note onsets at given frequencies (with multithreading). ">DetectorBank</a> if required, but can also be used as a standalone object <a class="el" href="PythonExamples.html#FrequencyShifterExample">thus </a>.</p>
<p>See <a class="el" href="FrequencyShifterOperation.html">here </a> for an details on the operation of the <a class="el" href="classFrequencyShifter.html" title="Shift a signal by a given frequency. ">FrequencyShifter</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
