<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>A Hopf, Skip and a Jump: NoteDetector Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">A Hopf, Skip and a Jump
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classNoteDetector-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">NoteDetector Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Note detector.  
 <a href="classNoteDetector.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="notedetector_8h_source.html">notedetector.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structNoteDetector_1_1Analyse__params.html">Analyse_params</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct to pass args to EventDetector::analyse() in threads.  <a href="structNoteDetector_1_1Analyse__params.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a93fda93ff879cda4d4718a2b73ccfff3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#a93fda93ff879cda4d4718a2b73ccfff3">NoteDetector</a> (const parameter_t <a class="el" href="classNoteDetector.html#a9299273913348aa5def36ee8a2387eea">sr</a>, const inputSample_t *inputBuffer, const std::size_t inputBufferSize, const parameter_t *<a class="el" href="classNoteDetector.html#a392f0d6bbc2f46183d1a28aa16c26aa2">freqs</a>, const std::size_t <a class="el" href="classNoteDetector.html#a506168f4de8f39b65dc96e9129ff523c">freqsSize</a>, const std::size_t <a class="el" href="classNoteDetector.html#afb18f51edb6b337fd2d27441a0fd25d9">edo</a>, const parameter_t <a class="el" href="classNoteDetector.html#ac03ed4840ba5accb9d5092c5ab5cf8dd">bandwidth</a>=<a class="el" href="classNoteDetector.html#a20713db43db1180e505e088c8cc8255e">default_bandwidth</a>, const int <a class="el" href="classNoteDetector.html#a02152152db2457153dc14733138af18d">features</a>=<a class="el" href="classNoteDetector.html#a5dd1868e43c8e210212db007b2db2e83">default_features</a>, const parameter_t <a class="el" href="classNoteDetector.html#a6b3e71a96ccea06b73c7f289f423a0f1">damping</a>=<a class="el" href="classNoteDetector.html#a03328113efd3b95640ca4d2927e1a2a6">default_damping</a>, const parameter_t <a class="el" href="classNoteDetector.html#ae811f04eedccb0cbdc7e6486892915c3">gain</a>=<a class="el" href="classNoteDetector.html#ad516a8caacf509705fa501b8aa9097a0">default_gain</a>, const std::string path=&quot;log&quot;)</td></tr>
<tr class="memdesc:a93fda93ff879cda4d4718a2b73ccfff3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a note detector maybe using some default properties.  <a href="#a93fda93ff879cda4d4718a2b73ccfff3">More...</a><br /></td></tr>
<tr class="separator:a93fda93ff879cda4d4718a2b73ccfff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ccec523c13f71f072bcfbedbc9c4d86"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#a1ccec523c13f71f072bcfbedbc9c4d86">NoteDetector</a> (const parameter_t <a class="el" href="classNoteDetector.html#a9299273913348aa5def36ee8a2387eea">sr</a>, const inputSample_t *inputBuffer, const std::size_t inputBufferSize, const parameter_t *<a class="el" href="classNoteDetector.html#a392f0d6bbc2f46183d1a28aa16c26aa2">freqs</a>, const std::size_t <a class="el" href="classNoteDetector.html#a506168f4de8f39b65dc96e9129ff523c">freqsSize</a>, const std::size_t <a class="el" href="classNoteDetector.html#afb18f51edb6b337fd2d27441a0fd25d9">edo</a>, const <a class="el" href="structNDOptArgs.html">NDOptArgs</a> &amp;args)</td></tr>
<tr class="memdesc:a1ccec523c13f71f072bcfbedbc9c4d86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a note detector maybe using named properties.  <a href="#a1ccec523c13f71f072bcfbedbc9c4d86">More...</a><br /></td></tr>
<tr class="separator:a1ccec523c13f71f072bcfbedbc9c4d86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9874ea5051ae02435ecd74e27362781"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#ae9874ea5051ae02435ecd74e27362781">analyse</a> (Onsets_t &amp;onsets, double threshold)</td></tr>
<tr class="memdesc:ae9874ea5051ae02435ecd74e27362781"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get onsets (and, later, pitch) for all given frequencies.  <a href="#ae9874ea5051ae02435ecd74e27362781">More...</a><br /></td></tr>
<tr class="separator:ae9874ea5051ae02435ecd74e27362781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeb9a03c07d00f81f7202f657c137b57"><td class="memItemLeft" align="right" valign="top"><a id="adeb9a03c07d00f81f7202f657c137b57"></a>
const parameter_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_bandwidth</b> () const</td></tr>
<tr class="separator:adeb9a03c07d00f81f7202f657c137b57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab475196d3026724ab603d0eef57ecf31"><td class="memItemLeft" align="right" valign="top"><a id="ab475196d3026724ab603d0eef57ecf31"></a>
const int&#160;</td><td class="memItemRight" valign="bottom"><b>get_features</b> () const</td></tr>
<tr class="separator:ab475196d3026724ab603d0eef57ecf31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a410174604a86a87b8ba73c1a35713407"><td class="memItemLeft" align="right" valign="top"><a id="a410174604a86a87b8ba73c1a35713407"></a>
const parameter_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_damping</b> () const</td></tr>
<tr class="separator:a410174604a86a87b8ba73c1a35713407"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf186639b25313c752104b0bdd280586"><td class="memItemLeft" align="right" valign="top"><a id="abf186639b25313c752104b0bdd280586"></a>
const parameter_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_gain</b> () const</td></tr>
<tr class="separator:abf186639b25313c752104b0bdd280586"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a20713db43db1180e505e088c8cc8255e"><td class="memItemLeft" align="right" valign="top"><a id="a20713db43db1180e505e088c8cc8255e"></a>
static constexpr parameter_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#a20713db43db1180e505e088c8cc8255e">default_bandwidth</a> {0}</td></tr>
<tr class="memdesc:a20713db43db1180e505e088c8cc8255e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default detector bandwidth. <br /></td></tr>
<tr class="separator:a20713db43db1180e505e088c8cc8255e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dd1868e43c8e210212db007b2db2e83"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#a5dd1868e43c8e210212db007b2db2e83">default_features</a></td></tr>
<tr class="memdesc:a5dd1868e43c8e210212db007b2db2e83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default detector features.  <a href="#a5dd1868e43c8e210212db007b2db2e83">More...</a><br /></td></tr>
<tr class="separator:a5dd1868e43c8e210212db007b2db2e83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03328113efd3b95640ca4d2927e1a2a6"><td class="memItemLeft" align="right" valign="top"><a id="a03328113efd3b95640ca4d2927e1a2a6"></a>
static constexpr parameter_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#a03328113efd3b95640ca4d2927e1a2a6">default_damping</a> {0.0001}</td></tr>
<tr class="memdesc:a03328113efd3b95640ca4d2927e1a2a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default damping for detectors. <br /></td></tr>
<tr class="separator:a03328113efd3b95640ca4d2927e1a2a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad516a8caacf509705fa501b8aa9097a0"><td class="memItemLeft" align="right" valign="top"><a id="ad516a8caacf509705fa501b8aa9097a0"></a>
static constexpr parameter_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#ad516a8caacf509705fa501b8aa9097a0">default_gain</a> {50}</td></tr>
<tr class="memdesc:ad516a8caacf509705fa501b8aa9097a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default detector gain. <br /></td></tr>
<tr class="separator:ad516a8caacf509705fa501b8aa9097a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:abeb4e1ba79186319981d5e19cd314623"><td class="memItemLeft" align="right" valign="top"><a id="abeb4e1ba79186319981d5e19cd314623"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#abeb4e1ba79186319981d5e19cd314623">init</a> (void)</td></tr>
<tr class="memdesc:abeb4e1ba79186319981d5e19cd314623"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the <a class="el" href="classNoteDetector.html" title="Note detector. ">NoteDetector</a> once all the construction arguments are known. <br /></td></tr>
<tr class="separator:abeb4e1ba79186319981d5e19cd314623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a379e25732013d090b0658ff3ffeadb6c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#a379e25732013d090b0658ff3ffeadb6c">analyseDelegate</a> (void *args)</td></tr>
<tr class="memdesc:a379e25732013d090b0658ff3ffeadb6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform one thread's worth of work.  <a href="#a379e25732013d090b0658ff3ffeadb6c">More...</a><br /></td></tr>
<tr class="separator:a379e25732013d090b0658ff3ffeadb6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a9299273913348aa5def36ee8a2387eea"><td class="memItemLeft" align="right" valign="top"><a id="a9299273913348aa5def36ee8a2387eea"></a>
const parameter_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#a9299273913348aa5def36ee8a2387eea">sr</a></td></tr>
<tr class="memdesc:a9299273913348aa5def36ee8a2387eea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Input sample rate. <br /></td></tr>
<tr class="separator:a9299273913348aa5def36ee8a2387eea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a392f0d6bbc2f46183d1a28aa16c26aa2"><td class="memItemLeft" align="right" valign="top"><a id="a392f0d6bbc2f46183d1a28aa16c26aa2"></a>
const parameter_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#a392f0d6bbc2f46183d1a28aa16c26aa2">freqs</a></td></tr>
<tr class="memdesc:a392f0d6bbc2f46183d1a28aa16c26aa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frequencies to look for. <br /></td></tr>
<tr class="separator:a392f0d6bbc2f46183d1a28aa16c26aa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a506168f4de8f39b65dc96e9129ff523c"><td class="memItemLeft" align="right" valign="top"><a id="a506168f4de8f39b65dc96e9129ff523c"></a>
const std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#a506168f4de8f39b65dc96e9129ff523c">freqsSize</a></td></tr>
<tr class="memdesc:a506168f4de8f39b65dc96e9129ff523c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of frequencies to look for. <br /></td></tr>
<tr class="separator:a506168f4de8f39b65dc96e9129ff523c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb18f51edb6b337fd2d27441a0fd25d9"><td class="memItemLeft" align="right" valign="top"><a id="afb18f51edb6b337fd2d27441a0fd25d9"></a>
const std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#afb18f51edb6b337fd2d27441a0fd25d9">edo</a></td></tr>
<tr class="memdesc:afb18f51edb6b337fd2d27441a0fd25d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of divisons per octave. <br /></td></tr>
<tr class="separator:afb18f51edb6b337fd2d27441a0fd25d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac03ed4840ba5accb9d5092c5ab5cf8dd"><td class="memItemLeft" align="right" valign="top"><a id="ac03ed4840ba5accb9d5092c5ab5cf8dd"></a>
parameter_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#ac03ed4840ba5accb9d5092c5ab5cf8dd">bandwidth</a></td></tr>
<tr class="memdesc:ac03ed4840ba5accb9d5092c5ab5cf8dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bandwidth for every detector. <br /></td></tr>
<tr class="separator:ac03ed4840ba5accb9d5092c5ab5cf8dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02152152db2457153dc14733138af18d"><td class="memItemLeft" align="right" valign="top"><a id="a02152152db2457153dc14733138af18d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#a02152152db2457153dc14733138af18d">features</a></td></tr>
<tr class="memdesc:a02152152db2457153dc14733138af18d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method and normalisation. <br /></td></tr>
<tr class="separator:a02152152db2457153dc14733138af18d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b3e71a96ccea06b73c7f289f423a0f1"><td class="memItemLeft" align="right" valign="top"><a id="a6b3e71a96ccea06b73c7f289f423a0f1"></a>
parameter_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#a6b3e71a96ccea06b73c7f289f423a0f1">damping</a></td></tr>
<tr class="memdesc:a6b3e71a96ccea06b73c7f289f423a0f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detector damping. <br /></td></tr>
<tr class="separator:a6b3e71a96ccea06b73c7f289f423a0f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae811f04eedccb0cbdc7e6486892915c3"><td class="memItemLeft" align="right" valign="top"><a id="ae811f04eedccb0cbdc7e6486892915c3"></a>
parameter_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#ae811f04eedccb0cbdc7e6486892915c3">gain</a></td></tr>
<tr class="memdesc:ae811f04eedccb0cbdc7e6486892915c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detector gain. <br /></td></tr>
<tr class="separator:ae811f04eedccb0cbdc7e6486892915c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a236baa7a1755e6490a21eb4aa3f36116"><td class="memItemLeft" align="right" valign="top"><a id="a236baa7a1755e6490a21eb4aa3f36116"></a>
inputSample_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#a236baa7a1755e6490a21eb4aa3f36116">inputBufferPad</a></td></tr>
<tr class="memdesc:a236baa7a1755e6490a21eb4aa3f36116"><td class="mdescLeft">&#160;</td><td class="mdescRight">Input buffer, zero padded. <br /></td></tr>
<tr class="separator:a236baa7a1755e6490a21eb4aa3f36116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0253b1823aa393dee8af17bd0c33466"><td class="memItemLeft" align="right" valign="top"><a id="ac0253b1823aa393dee8af17bd0c33466"></a>
std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#ac0253b1823aa393dee8af17bd0c33466">inputBufferPadSize</a></td></tr>
<tr class="memdesc:ac0253b1823aa393dee8af17bd0c33466"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of padded input buffer. <br /></td></tr>
<tr class="separator:ac0253b1823aa393dee8af17bd0c33466"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a488d1586e69a1e1e0832d39336a0e6de"><td class="memItemLeft" align="right" valign="top"><a id="a488d1586e69a1e1e0832d39336a0e6de"></a>
std::vector&lt; std::unique_ptr&lt; EventDetector &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#a488d1586e69a1e1e0832d39336a0e6de">eventdetectors</a></td></tr>
<tr class="memdesc:a488d1586e69a1e1e0832d39336a0e6de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector of EventDetectors to be run by the <a class="el" href="classNoteDetector.html" title="Note detector. ">NoteDetector</a>. <br /></td></tr>
<tr class="separator:a488d1586e69a1e1e0832d39336a0e6de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd465516900ccdb567d308092d1e082e"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classThreadPool.html">ThreadPool</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoteDetector.html#abd465516900ccdb567d308092d1e082e">threadPool</a></td></tr>
<tr class="memdesc:abd465516900ccdb567d308092d1e082e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Results from all EventDetectors Map relates the centre frequency index to the vector of onsets.  <a href="#abd465516900ccdb567d308092d1e082e">More...</a><br /></td></tr>
<tr class="separator:abd465516900ccdb567d308092d1e082e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Note detector. </p>

<p class="definition">Definition at line <a class="el" href="notedetector_8h_source.html#l00018">18</a> of file <a class="el" href="notedetector_8h_source.html">notedetector.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a93fda93ff879cda4d4718a2b73ccfff3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93fda93ff879cda4d4718a2b73ccfff3">&#9670;&nbsp;</a></span>NoteDetector() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NoteDetector::NoteDetector </td>
          <td>(</td>
          <td class="paramtype">const parameter_t&#160;</td>
          <td class="paramname"><em>sr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const inputSample_t *&#160;</td>
          <td class="paramname"><em>inputBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>inputBufferSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const parameter_t *&#160;</td>
          <td class="paramname"><em>freqs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>freqsSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>edo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const parameter_t&#160;</td>
          <td class="paramname"><em>bandwidth</em> = <code><a class="el" href="classNoteDetector.html#a20713db43db1180e505e088c8cc8255e">default_bandwidth</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>features</em> = <code><a class="el" href="classNoteDetector.html#a5dd1868e43c8e210212db007b2db2e83">default_features</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const parameter_t&#160;</td>
          <td class="paramname"><em>damping</em> = <code><a class="el" href="classNoteDetector.html#a03328113efd3b95640ca4d2927e1a2a6">default_damping</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const parameter_t&#160;</td>
          <td class="paramname"><em>gain</em> = <code><a class="el" href="classNoteDetector.html#ad516a8caacf509705fa501b8aa9097a0">default_gain</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>path</em> = <code>&quot;log&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a note detector maybe using some default properties. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sr</td><td>Sample rate of input audio </td></tr>
    <tr><td class="paramname">inputBuffer</td><td>Input </td></tr>
    <tr><td class="paramname">inputBufferSize</td><td>Size of audio </td></tr>
    <tr><td class="paramname">freqs</td><td>Array of frequencies to look for </td></tr>
    <tr><td class="paramname">freqsSize</td><td>Size of frequency array </td></tr>
    <tr><td class="paramname">edo</td><td>Number of divisons per octave. </td></tr>
    <tr><td class="paramname">bandwidth</td><td>Bandwidth for every detector. Default is minimum bandwidth. </td></tr>
    <tr><td class="paramname">features</td><td>Features enum containing method and normalisation. Default is runge_kutta | freq_unnormalized | amp_normalized </td></tr>
    <tr><td class="paramname">damping</td><td>Detector damping. Default is 0.0001 </td></tr>
    <tr><td class="paramname">gain</td><td>Detector gain. Default is 25. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1ccec523c13f71f072bcfbedbc9c4d86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ccec523c13f71f072bcfbedbc9c4d86">&#9670;&nbsp;</a></span>NoteDetector() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NoteDetector::NoteDetector </td>
          <td>(</td>
          <td class="paramtype">const parameter_t&#160;</td>
          <td class="paramname"><em>sr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const inputSample_t *&#160;</td>
          <td class="paramname"><em>inputBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>inputBufferSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const parameter_t *&#160;</td>
          <td class="paramname"><em>freqs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>freqsSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>edo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structNDOptArgs.html">NDOptArgs</a> &amp;&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a note detector maybe using named properties. </p>
<p>bandwidth, features, damping and gain my be specified in the variable argument list in any order by prefixing the value with the appropriate enum arg value. The final value in the argument lest must be arg::nd_last.</p>
<p>If a parameter is not specified, its default value is used</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sr</td><td>Sample rate of input audio </td></tr>
    <tr><td class="paramname">inputBuffer</td><td>Audio </td></tr>
    <tr><td class="paramname">inputBufferSize</td><td>Size of audio </td></tr>
    <tr><td class="paramname">freqs</td><td>Array of frequencies to look for </td></tr>
    <tr><td class="paramname">freqsSize</td><td>Size of frequency array </td></tr>
    <tr><td class="paramname">edo</td><td>Number of divisons per octave </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae9874ea5051ae02435ecd74e27362781"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9874ea5051ae02435ecd74e27362781">&#9670;&nbsp;</a></span>analyse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NoteDetector::analyse </td>
          <td>(</td>
          <td class="paramtype">Onsets_t &amp;&#160;</td>
          <td class="paramname"><em>onsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>threshold</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get onsets (and, later, pitch) for all given frequencies. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">onsets</td><td>Empty Onsets_t map to be filled </td></tr>
    <tr><td class="paramname">threshold</td><td><a class="el" href="classOnsetDetector.html" title="Onset detector. ">OnsetDetector</a> threshold </td></tr>
    <tr><td class="paramname">w0</td><td><a class="el" href="classOnsetDetector.html#a164c45d6ab9a68134cf74eb90a44afff" title="Analyse the input and return any onsets. ">OnsetDetector::analyse</a> weight for 'count' criterion </td></tr>
    <tr><td class="paramname">w1</td><td><a class="el" href="classOnsetDetector.html#a164c45d6ab9a68134cf74eb90a44afff" title="Analyse the input and return any onsets. ">OnsetDetector::analyse</a> weight for 'threshold' criterion </td></tr>
    <tr><td class="paramname">w2</td><td><a class="el" href="classOnsetDetector.html#a164c45d6ab9a68134cf74eb90a44afff" title="Analyse the input and return any onsets. ">OnsetDetector::analyse</a> weight for 'difference' criterion </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Map of frequency index-onsets vector pairs </dd></dl>

</div>
</div>
<a id="a379e25732013d090b0658ff3ffeadb6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a379e25732013d090b0658ff3ffeadb6c">&#9670;&nbsp;</a></span>analyseDelegate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void NoteDetector::analyseDelegate </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Perform one thread's worth of work. </p>
<p>Called by <a class="el" href="classNoteDetector.html#ae9874ea5051ae02435ecd74e27362781" title="Get onsets (and, later, pitch) for all given frequencies. ">analyse()</a> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>Arguments (pointer to <a class="el" href="structNoteDetector_1_1Analyse__params.html" title="Struct to pass args to EventDetector::analyse() in threads. ">Analyse_params</a> struct) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5dd1868e43c8e210212db007b2db2e83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dd1868e43c8e210212db007b2db2e83">&#9670;&nbsp;</a></span>default_features</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr int NoteDetector::default_features</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div><div class="line">        DetectorBank::Features::runge_kutta |</div><div class="line">        DetectorBank::Features::freq_unnormalized |</div><div class="line">        DetectorBank::Features::amp_unnormalized</div><div class="line">    }</div></div><!-- fragment -->
<p>Default detector features. </p>

<p class="definition">Definition at line <a class="el" href="notedetector_8h_source.html#l00028">28</a> of file <a class="el" href="notedetector_8h_source.html">notedetector.h</a>.</p>

</div>
</div>
<a id="abd465516900ccdb567d308092d1e082e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd465516900ccdb567d308092d1e082e">&#9670;&nbsp;</a></span>threadPool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classThreadPool.html">ThreadPool</a>&gt; NoteDetector::threadPool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Results from all EventDetectors Map relates the centre frequency index to the vector of onsets. </p>
<p>Thread manager </p>

<p class="definition">Definition at line <a class="el" href="notedetector_8h_source.html#l00128">128</a> of file <a class="el" href="notedetector_8h_source.html">notedetector.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/keziah/onsets/DetectorBank/src/<a class="el" href="notedetector_8h_source.html">notedetector.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
